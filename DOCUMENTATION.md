# Документация к курсовой работе

**Тема №96**: "Разработка программного обеспечения для создания и обработки сведений о багаже пассажиров"

## Описание проекта

Разработано desktop приложение на языке C++ с графическим интерфейсом для управления данными о багаже пассажиров авиарейсов.

## Выполненные требования

### Структура данных

Реализована структура "Файл «Багаж пассажиров»" со следующими полями:
- **№ рейса** (QString) - номер авиарейса
- **Ф.И.О. пассажира** (QString) - полное имя пассажира
- **Количество вещей** (int, ≤5) - число единиц багажа
- **Вес каждой вещи** (QVector<double>) - массив весов в килограммах

### Реализованные функции (8 штук)

#### Функция 1: Создать файл с заданной структурой записи
**Реализация**: `BaggageManager::createFile()`
- Создает новый бинарный файл для хранения данных
- Инициализирует пустую коллекцию записей
- GUI: кнопка "1. Создать файл", диалог сохранения файла

#### Функция 2: Выдать на экран содержимое файла
**Реализация**: `MainWindow::onShowRecords()`, `MainWindow::updateTable()`
- Отображает все записи в таблице QTableWidget
- Показывает: № рейса, Ф.И.О., количество вещей, веса, общий вес
- GUI: кнопка "2. Показать содержимое", главная таблица

#### Функция 3: Вывести список пассажиров с 1 вещью весом 20-30 кг
**Реализация**: `BaggageManager::filterPassengersWithSingleItem20_30kg()`
- Фильтрует записи по критериям: ровно 1 вещь И вес ≥20 кг И вес ≤30 кг
- Формат вывода: № рейса; Ф.И.О.; Вес вещи
- GUI: кнопка "3. Фильтр (1 вещь, 20-30 кг)", диалог FilterDialog

#### Функция 4: Сформировать файл с № рейса, Ф.И.О., общим весом багажа
**Реализация**: `BaggageManager::createSummaryFile()`
- Создает текстовый файл сводки
- Формат: таблица с колонками (№ рейса | Ф.И.О. | Общий вес)
- Кодировка UTF-8
- GUI: кнопка "4. Создать файл сводки", диалог сохранения

#### Функция 5: Распечатать новый файл
**Реализация**: `MainWindow::onShowSummaryFile()`
- Открывает файл сводки в системном текстовом редакторе
- Использует QDesktopServices::openUrl()
- GUI: кнопка "5. Показать файл сводки", диалог выбора файла

#### Функция 6: Добавить запись в исходный файл
**Реализация**: `BaggageManager::addRecord()`, диалог AddRecordDialog
- Добавляет новую запись с валидацией
- Проверяет: количество вещей ≤5, вес каждой вещи >0
- GUI: кнопка "6. Добавить запись", диалоговое окно с формой

#### Функция 7: Удалить записи по заданным номерам рейсов
**Реализация**: `BaggageManager::deleteRecordsByFlightNumbers()`, диалог DeleteByFlightDialog
- Принимает список номеров рейсов
- Удаляет ВСЕ записи с совпадающими номерами
- Возвращает количество удаленных записей
- GUI: кнопка "7. Удалить по рейсам", диалог с текстовым полем

#### Функция 8: Для указанных Ф.И.О. изменить количество вещей
**Реализация**: `BaggageManager::changeItemCountByName()`, диалог ChangeItemsDialog
- Ищет записи по точному совпадению Ф.И.О.
- Изменяет количество и веса вещей
- Применяется ко ВСЕМ записям с указанным Ф.И.О.
- GUI: кнопка "8. Изменить кол-во вещей", диалоговое окно

## Архитектура приложения

### Модель данных

#### BaggageRecord (BaggageRecord.h/cpp)
```cpp
class BaggageRecord {
    QString m_flightNumber;       // Номер рейса
    QString m_passengerName;      // Ф.И.О. пассажира
    QVector<double> m_itemWeights; // Веса вещей (до 5)
public:
    static constexpr int MAX_ITEMS = 5;
    // Геттеры, сеттеры, валидация
    // Сериализация (QDataStream)
};
```

#### BaggageManager (BaggageManager.h/cpp)
```cpp
class BaggageManager {
    QVector<BaggageRecord> m_records;
    QString m_currentFilename;
public:
    // Методы для всех 8 функций
    // Работа с файлами (загрузка/сохранение)
    // Поиск и фильтрация
};
```

### Графический интерфейс (Qt Widgets)

#### MainWindow (MainWindow.h/cpp)
- Главное окно приложения
- QTableWidget для отображения данных
- Меню: Файл, Операции, Помощь
- Панель инструментов
- 8 кнопок для обязательных функций
- Статусная строка

#### Диалоговые окна

1. **AddRecordDialog** - добавление новой записи
   - QLineEdit для № рейса и Ф.И.О.
   - QSpinBox для количества вещей
   - QDoubleSpinBox для весов (до 5 полей)
   - Динамическое отображение полей

2. **FilterDialog** - просмотр результатов фильтрации
   - QTableWidget с результатами
   - Счетчик найденных записей

3. **DeleteByFlightDialog** - удаление по рейсам
   - QTextEdit для ввода списка рейсов
   - Подтверждение удаления

4. **ChangeItemsDialog** - изменение количества вещей
   - QLineEdit для Ф.И.О.
   - QSpinBox для нового количества
   - QDoubleSpinBox для новых весов

## Технологии и инструменты

### Язык программирования
- **C++17** - современный стандарт с поддержкой:
  - `std::unique_ptr` для управления памятью
  - Улучшенная семантика перемещения
  - Структурированные привязки

### GUI фреймворк
- **Qt 6.x** (совместимо с Qt 5.15+)
  - Qt Core - базовая функциональность
  - Qt Widgets - графические компоненты
  - Поддержка русского языка (UTF-8)

### Система сборки
- **CMake 3.16+**
  - Кросс-платформенная сборка
  - Автоматическая генерация MOC/UIC
  - Поддержка Qt 5 и Qt 6

### Архитектурный паттерн
- **Model-View** (упрощенный MVC)
  - Model: BaggageRecord, BaggageManager
  - View: MainWindow, диалоги
  - Разделение логики и представления

## Особенности реализации

### Валидация данных

1. **На уровне модели** (BaggageRecord):
   - `isValidItemCount()` - проверка 1 ≤ количество ≤ 5
   - `isValidWeight()` - проверка 0 < вес ≤ 100
   - `isValid()` - комплексная проверка записи

2. **На уровне GUI**:
   - QSpinBox с ограничениями диапазона
   - QDoubleSpinBox с минимумом/максимумом
   - Проверка заполнения обязательных полей
   - Информативные сообщения об ошибках

### Работа с файлами

**Бинарный формат** (.dat):
- QDataStream для сериализации
- Версионирование формата (Qt_6_0)
- Эффективное хранение данных
- Автоматическая кодировка строк

**Текстовый формат** (.txt):
- UTF-8 кодировка
- Табличное представление
- Читаемый человеком формат

### Обработка ошибок

```cpp
try {
    // Файловые операции
    if (!file.open(QIODevice::ReadOnly)) {
        qWarning() << "Не удалось открыть файл";
        return false;
    }
} catch (...) {
    // Обработка исключений
}
```

- Проверка успешности файловых операций
- Информирование пользователя через QMessageBox
- Логирование ошибок через qWarning/qDebug

### Интерфейс пользователя

**Удобство использования**:
- Русский язык во всех элементах
- Подсказки (placeholders) в полях ввода
- Чередующиеся цвета строк в таблице
- Статусная строка с информацией о файле
- Подтверждающие диалоги для важных операций

**Доступность**:
- Клавиатурная навигация
- Горячие клавиши в меню
- Понятные названия кнопок
- Логичная группировка элементов

## Структура файлов проекта

```
baggage_system/
├── CMakeLists.txt              # Файл сборки
├── README.md                   # Основная документация
├── TESTING.md                  # Инструкции по тестированию
├── DOCUMENTATION.md            # Техническая документация
├── include/                    # Заголовочные файлы (.h)
│   ├── BaggageRecord.h         # Класс записи о багаже
│   ├── BaggageManager.h        # Менеджер управления данными
│   ├── MainWindow.h            # Главное окно
│   ├── AddRecordDialog.h       # Диалог добавления
│   ├── FilterDialog.h          # Диалог фильтрации
│   ├── DeleteByFlightDialog.h  # Диалог удаления
│   └── ChangeItemsDialog.h     # Диалог изменения
└── src/                        # Исходные файлы (.cpp)
    ├── main.cpp                # Точка входа в приложение
    ├── BaggageRecord.cpp       # Реализация класса записи
    ├── BaggageManager.cpp      # Реализация менеджера
    ├── MainWindow.cpp          # Реализация главного окна
    ├── AddRecordDialog.cpp     # Реализация диалога добавления
    ├── FilterDialog.cpp        # Реализация диалога фильтрации
    ├── DeleteByFlightDialog.cpp # Реализация диалога удаления
    └── ChangeItemsDialog.cpp   # Реализация диалога изменения
```

## Сборка и запуск

### Требования
- CMake 3.16+
- C++17 совместимый компилятор
- Qt 5.15+ или Qt 6.x

### Команды сборки

```bash
# Создание директории сборки
mkdir build && cd build

# Конфигурация проекта
cmake ..

# Компиляция
cmake --build .

# Запуск
./BaggageSystem
```

## Тестирование

Приложение протестировано на:
- ✓ Создание и загрузка файлов
- ✓ Добавление записей с валидацией
- ✓ Фильтрация по критериям
- ✓ Создание файлов сводки
- ✓ Удаление по номерам рейсов
- ✓ Изменение количества вещей
- ✓ Корректность русского языка
- ✓ Обработка ошибок

Подробное руководство по тестированию: **TESTING.md**

## Соответствие требованиям ТЗ

| Требование | Статус | Реализация |
|------------|--------|------------|
| Структура данных (4 поля) | ✓ | BaggageRecord |
| Функция 1: Создать файл | ✓ | createFile() |
| Функция 2: Вывод содержимого | ✓ | updateTable() |
| Функция 3: Фильтр 1 вещь 20-30кг | ✓ | filterPassengersWithSingleItem20_30kg() |
| Функция 4: Файл сводки | ✓ | createSummaryFile() |
| Функция 5: Показать сводку | ✓ | onShowSummaryFile() |
| Функция 6: Добавить запись | ✓ | addRecord() + AddRecordDialog |
| Функция 7: Удалить по рейсам | ✓ | deleteRecordsByFlightNumbers() |
| Функция 8: Изменить кол-во вещей | ✓ | changeItemCountByName() |
| Графический интерфейс | ✓ | Qt Widgets (MainWindow + диалоги) |
| Русский язык | ✓ | Все элементы UI на русском |
| Валидация (вещей ≤5, вес >0) | ✓ | BaggageRecord::isValid() + GUI |
| Обработка ошибок | ✓ | Try-catch + QMessageBox |
| Сохранение между сеансами | ✓ | Бинарные файлы (.dat) |

## Заключение

Разработанное приложение полностью соответствует техническому заданию курсовой работы №96. Реализованы все 8 обязательных функций с полноценным графическим интерфейсом на русском языке. Приложение обеспечивает удобную работу с данными о багаже пассажиров, включает валидацию данных и обработку ошибок.

**Технологический стек**: C++17, Qt 6, CMake
**Архитектура**: Model-View
**Кросс-платформенность**: Linux, Windows, macOS
**Версия**: 1.0
